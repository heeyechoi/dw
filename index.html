<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>잉크 퍼짐 인터랙션</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: white;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
<canvas id="canvas"></canvas>
<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const inkBlobs = [];

function createInkBlob(x, y, amount = 400) {
  const particles = [];
  for (let i = 0; i < amount; i++) {
    const angle = Math.random() * 2 * Math.PI;
    const speed = Math.random() * 1.5;
    const radius = Math.random() * 3 + 1;

    const base = Math.random();
    let color;
    if (base < 0.4) color = `rgba(138, 43, 226, ALPHA)`;     // 보라
    else if (base < 0.8) color = `rgba(255, 215, 0, ALPHA)`;  // 노랑
    else color = `rgba(0, 0, 0, ALPHA)`;                      // 검정

    particles.push({
      x: x,
      y: y,
      vx: Math.cos(angle) * speed,
      vy: Math.sin(angle) * speed,
      radius: radius,
      alpha: 0,
      targetAlpha: Math.random() * 0.6 + 0.3,
      color: color
    });
  }
  inkBlobs.push(particles);
}

function animate() {
  ctx.fillStyle = 'rgba(255, 255, 255, 0.03)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  for (const blob of inkBlobs) {
    for (const p of blob) {
      ctx.beginPath();
      ctx.fillStyle = p.color.replace("ALPHA", p.alpha.toFixed(2));
      ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
      ctx.fill();

      p.x += p.vx;
      p.y += p.vy;

      if (p.alpha < p.targetAlpha) {
        p.alpha += 0.02;
      } else {
        p.alpha *= 0.96;
      }
    }
  }

  requestAnimationFrame(animate);
}

canvas.addEventListener("click", (e) => {
  createInkBlob(e.clientX, e.clientY);
});

animate();
</script>
</body>
</html>
